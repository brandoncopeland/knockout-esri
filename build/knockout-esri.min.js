//knockout-esri v0.1.0 | (c) 2012 BrandonCopeland
(function(e,a,d,b,c){d.esri=d.esri||{};d.esri.MapBinding=function(){var o=this;var m="mapObject";var l="isLoaded";var g="extent";var j="layers";var h="extentRequest";var k="levelRequest";var n="onClick";var p=function(r,q){if(r&&q){a.each(q,function(s,t){if(a.inArray(t.id,r.layerIds)===-1&&a.inArray(t.id,r.graphicsLayerIds)===-1){r.addLayer(t,s)}})}};var i=function(q){var r;b.connect(q,"onLoad",function(s){b.connect(e,"onresize",function(t){if(a(q.container).is(":visible")){e.clearTimeout(r);r=e.setTimeout(function(){q.resize();q.reposition()},100)}})})};var f={init:function(q,u){b.require("esri.map");var r=q.id;var t=u();var s={fadeOnZoom:true,fitExtent:true,logo:false};b.ready(function(){if(t[h]&&t[h]()){s=a.extend(s,{extent:t[h]()});t[h](undefined)}var v=new c.Map(r,s);if(t[m]){t[m](v)}i(v);if(t[l]){b.connect(v,"onLoad",function(w){t[l](v.loaded)})}if(t[n]){b.connect(v,"onClick",t[n])}if(t[g]){b.connect(v,"onExtentChange",function(w){t[g](w)})}if(t[h]){d.computed(function(){if(t[h]()){v.setExtent(t[h](),s.fitExtent);t[h](undefined)}})}if(t[k]){d.computed(function(){if(t[k]()){var w=t[k]();if(w.point&&w.level){v.centerAndZoom(w.point,w.level)}else{if(w.point){v.centerAt(w.point)}else{if(w.level){v.setLevel(w.level)}}}t[k](undefined)}})}if(t[j]){d.computed(function(){p(v,t[j]())})}})}};d.bindingHandlers.esriMap=f};d.esri.MapBinding=new d.esri.MapBinding()}(window,jQuery,ko,dojo,esri));